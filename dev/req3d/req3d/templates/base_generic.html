{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel='icon' href="{% static 'home/img/3d.png' %}" type='image/x-icon'>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
    {% comment %} Bootstrap CSS {% endcomment %}
    
    {% load django_bootstrap5 %}

    {% bootstrap_css %}

    {% bootstrap_javascript %}

    {% bootstrap_messages %}

    <title>{% block title %}{% endblock %}</title>


    {% comment %} {% if user.is_authenticated %}
    <a class="nav-item nav-link" href="{% url 'profile' %}">Profile</a>
    <a class="nav-item nav-link" href="{% url 'logout' %}">Logout</a>
  {% else %}
    <a class="nav-item nav-link" href="{% url 'login' %}">Login</a>
    <a class="nav-item nav-link" href="{% url 'register' %}">Register</a>
  {% endif %} {% endcomment %}

</head>
<body class="d-flex flex-column min-vh-100">
    <div class="mt-auto">
        <nav class="navbar navbar-expand-lg", style="background-color: #d6e6ff; padding: 1.25% 5% 1.5% 5%">
            <div class="container-fluid">
                <a class="navbar-brand" href="https://miem.hse.ru/">
                    <img src="{% static 'home/img/_svg.png' %}" width="110" height="28" alt="" loading="lazy">
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#navbarOffcanvasLg" aria-controls="navbarOffcanvasLg">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="offcanvas offcanvas-end" tabindex="-1" id="navbarOffcanvasLg" aria-labelledby="navbarOffcanvasLgLabel">
                    <div class="offcanvas-header">
                        <h5 class="offcanvas-title navbar-brand" id="offcanvasNavbarLabel" ><img src="{% static 'home/img/3d.png' %}" width="122" height="80" alt="" loading="lazy"> Меню</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                    </div>
                    <div class="offcanvas-body">
                        <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
                            <li class="nav-item">
                                <a class="nav-link active" aria-current="page" href="{% url 'home' %}"><i class="bi bi-house"></i> Главная</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="{% url 'appform' %}"><i class="bi bi-pencil-square"></i> Подать заявку</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="{% url 'status_check' %}"><i class="bi bi-question-octagon"></i> Статус заказа</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="{% url 'instructions' %}"><i class="bi bi-clipboard-check"></i> Инструкция</a>
                            </li>

                            {% if user.discord_tag %}
                                <li class="nav-item">
                                    {% comment %} <a class="nav-link" href="{% url 'profile' %}">Profile</a> {% endcomment %}
                                    <a class="nav-link" href="#"><i class="bi bi-person-fill"></i> Профиль</a>
                                </li>
                                <li class="nav-item">
                                    {% comment %} <a class="nav-link" href="{% url 'logout' %}">Logout</a> {% endcomment %}
                                    <button type="button" class="btn btn-primary" onclick="document.location='{% url 'oauth_logout' %}'"><i class="bi bi-box-arrow-right"></i> Выйти</a>
                                </li>
                            {% else %}
                                <li class="nav-item">
                                    <button type="button" class="btn btn-primary" onclick="document.location='{% url 'oauth_login' %}'"><i class="bi bi-box-arrow-in-right"></i> Войти</button>
                                    {% comment %} <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#authmodal" data-bs-dismiss="offcanvas"><i class="bi bi-box-arrow-in-right"></i> Войти</button> {% endcomment %}
                                </li>
                            {% endif %}
                            
                        </ul>
                    </div>
                </div>
            </div>
        </nav>
    </div>
    {% block content %}

    {% endblock content %}
    

    <div class="mt-auto">
        <footer class="text-white text-center text-lg-start mt-auto", style="background-color: #00087a">
            <!-- Grid container -->
            <div class="container p-4">
                <!--Grid row-->
                <div class="row mt-4">
                    <!--Grid column-->
                    <div class="col-lg-4 col-md-12 mb-4 mb-md-0">
                        <a class="navbar-brand" href="https://miem.hse.ru/">
                            <img src="{% static 'home/img/_svg.png' %}" width="110" height="28" alt="" loading="lazy">
                        </a>
                        
                        <p>
                            3D-лаборатория 
                        </p>
    
                        <div class="mt-4">
                            <!-- Telegram -->
                            <a type="button" class="btn btn-floating btn-light btn-lg" href='#'><i class="bi bi-telegram"></i> Telegram Bot</a>
                        </div>
                    </div>
                    <!--Grid column-->
    
                    <!--Grid column-->
                    <div class="col-lg-4 col-md-6 mb-4 mb-md-0">
                        <h5 class="text-uppercase mb-4 pb-1">Контактные данные</h5>
    
                        <ul class="fa-ul text-left" style='list-style-type: none; margin-left: -40px'>
                            <li class="mb-3">
                                <span class="fa-li"></span><span class="ms-2">123458, Москва, ул. Таллинская, д. 34</span>
                            </li>
                            <li class="mb-3">
                                <span class="fa-li"></span><a href="mailto:imotajlenko@hse.ru" class="link-light ms-2">imotajlenko@hse.ru</a>
                            </li>
                            <li class="mb-3">
                                <span class="fa-li"></span><span class="ms-2">Мотайленко Илья Александрович</span>
                            </li>
                        </ul>
                    </div>
                    <!--Grid column-->
    
                    <!--Grid column-->
                    <div class="col-lg-4 col-md-6 mb-4 mb-md-0">
                        <h5 class="text-uppercase mb-4">Рабочее время</h5>
    
                        <table class="table text-center text-white">
                            <tbody class="fw-normal">
                                <tr>
                                    <td>Пн - Пт:</td>
                                    <td>8:00 - 21:00</td>
                                </tr>
                                <tr>
                                    <td>Сб - Вс:</td>
                                    <td>9:00 - 22:00</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <!--Grid column-->
                </div>
                <!--Grid row-->
            </div>
            <!-- Grid container -->
        </footer>
    </div>

    {% comment %} <div class="modal fade" id="authmodal" tabindex="-1">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h4 class="modal-title">Авторизация</h4>
            </div>
            <div class="modal-body">
          {% if user.is_authenticated %}
              <form method="post">
                {% csrf_token %}
                <input type="submit" name="logout"/>
              </form>
          {% else %}
              <form method="post" class="row g-3 needs-validation" novalidate>
                {% csrf_token %}
                <div class="mb-3 form-floating">
                    <input type="email" name="username" class="form-control" maxlength="30" id="id_username" aria-describedby="emailHelp" placeholder='test@hse.ru' required>
                    <label for="id_username" class="form-label">E-mail адрес</label>
                    <div class="invalid-feedback">
                        Пожалуйста, введите ваш e-mail.
                    </div>
                </div>
                <div class="form-floating">
                    <input type="password" name="password" class="form-control" id="id_password" placeholder="Password" required>
                    <label for="id_password" class="form-label">Пароль</label>
                    <div class="invalid-feedback">
                        Поле не может быть пустым.
                    </div>
                </div>
                
                <input type="submit" class="btn btn-primary" value="Войти"></input>
                <input type="hidden" name="next" value="{{ request.get_full_path }}" />

              </form>
              {% endif %}
            </div>
          </div>
        </div>
      </div> {% endcomment %}
    {% comment %} <script>
    (function () {
        'use strict'
    
        // Fetch all the forms we want to apply custom Bootstrap validation styles to
        var forms = document.querySelectorAll('.needs-validation')
    
        // Loop over them and prevent submission
        Array.prototype.slice.call(forms)
        .forEach(function (form) {
            form.addEventListener('submit', function (event) {
            if (!form.checkValidity()) {
                event.preventDefault()
                event.stopPropagation()
            }
    
            form.classList.add('was-validated')
            }, false)
        })
    })()
    </script> {% endcomment %}
</body>
</html>